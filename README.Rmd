---
title: "HealthMarkers"
output: 
  rmarkdown::github_document:
    toc: true
    toc_depth: 2
---

```{r setup, include=FALSE}
# load required libraries
library(knitr)
library(dplyr)
library(tidyr)
library(ggplot2)
```

<!-- badges: start -->

[![CRAN\_Status\_Badge](https://www.r-pkg.org/badges/version/HealthMarkers)](https://cran.r-project.org/package=HealthMarkers)
[![Travis\_build\_status](https://travis-ci.com/sufyansuleman/HealthMarkers.svg?branch=main)](https://travis-ci.com/sufyansuleman/HealthMarkers)

<!-- badges: end -->

# üîç Overview


**HealthMarkers** is a unified R package that computes a **comprehensive suite** of physiological and clinical biomarkers covering metabolic, cardiometabolic, hepatic, renal, pulmonary, and novel biofluid derived bimarkers.

---

## üì¶ Installation

```r
# CRAN release
install.packages("HealthMarkers")

# Development version
# remotes::install_github("sufyansuleman/HealthMarkers")
```

---

## üìë Overview of functions

### 1. Insulin Sensitivity & Resistance

| Category   | Function               | Description                                                                                                                                                                                                                                |
| :--------- | :--------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Fasting    | `fasting_is()`    | Computes 10 indices from fasting glucose (G0) and insulin (I0): HOMA-IR (and inverse), QUICKI, Raynaud, Bennett, FIRI, Belfiore\_basal, IG\_ratio\_basal, ISI\_basal, HOMA\_rev\_inv. Each uses unit conversions: G0√ó18‚Üímg/dL, I0√∑6‚Üí¬µU/mL. |
| OGTT       | `ogtt_indices()`       | Derives dynamic IS estimates at 0,30,120‚ÄØmin: Matsuda (AUC & row-mean), Gutt, Cederholm, Avignon\_Si0/120, BIGTT-SI, Belfiore\_ISI, HIRI\_inv, Ifc\_inv. Uses AUC formulas and log transforms.                                             |
| Adipose    | `adipo_is()`    | Integrates TG, HDL\_c, FFA with anthropometry: Revised\_QUICKI, VAI\_Men/Women\_inv, LAP\_Men/Women\_inv, TyG\_inv, TG\_HDL\_C\_inv, McAuley, Adipo\_inv, Belfiore\_inv\_FFA (FFA AUC). Conversions: TG√ó88.57, HDL√ó38.67.                  |
| Tracer/DXA | `tracer_dxa_is()` | Uses tracer rates (`rate_palmitate`, `rate_glycerol`) and DXA fat\_mass to compute LIRI\_inv, Lipo\_inv, ATIRI\_inv. Each index inverts a published regression-based formula (e.g. LIRI via Bellissimo equation).                          |
| All        | `all_insulin()`        | Wrapper to run any combination of the four above; `mode = "IS"` or `"IR"` toggles inversion.                                                                                                                                               |

### 2. Anthropometry & Metabolic Syndrome

| Metric        | Function          | Details and References                                                                                                                                              |
| :------------ | :---------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Adiposity SDS | `adiposity_sds()` | Standardized z-scores for BMI, waist, body-fat%, WHR, WHtR. Option `reference = "Danish"`. |
| Adiposity SDS sex stratified | `adiposity_sds_strat()` | Standardized z-scores for BMI, waist, body-fat%, WHR, WHtR. Sex-stratified using Danish reference growth curves (Klein et al. 2020). Option `reference = "Danish"`. |
| MetS Severity | `metss()`   | Calculate Metabolic Syndrome Severity Score (MetSSS) Wiley & Carrington (2016). Accounts for sex and race with published coefficients.                                                 |

### 3. Lipids & Cardiovascular Ratios

| Measure             | Function         | Formula / Note                                                                        |
| :------------------ | :--------------- | :------------------------------------------------------------------------------------ |
| Non-HDL             | `lipid_markers()`      | `TC - HDL_c`.                                                                         |
| Remnant Cholesterol | `lipid_markers()` | `TC - LDL_c - HDL_c`.                                                                 |
| Ratios              | `lipid_markers()` | TC/HDL, TG/HDL, LDL/HDL, ApoB/ApoA1. Atherogenic Index of Plasma (AIP) = log(TG/HDL). |

### 4. Liver Markers

| Score                | Function                        | Formula & Reference                                               |
| :------------------- | :------------------------------ | :---------------------------------------------------------------- |
| Fatty Liver Index    | `liver_markers()`                         | Bedogni equation: uses BMI, waist, TG, GGT (Bedogni et al. 2006). |
| NAFLD Fibrosis Score | `liver_markers()`                         | Uses age, BMI, AST/ALT, platelets, albumin (Angulo et al. 2007).  |
| APRI                 | `liver_markers()`                        | `(AST/upper_limit_AST) / platelets √ó100`.                         |
| FIB-4                | `liver_markers()`                        | `(age √ó AST)/(platelets √ó sqrt(ALT))`.                            |
| BARD, ALBI, MELD-XI  | `liver_markers()`| Published formulas combining bilirubin, albumin, INR, creatinine. |

### 5. Cardiometabolic risk features 

| Features          | Function          | Rule                                               |
| :------------ | :---------------- | :------------------------------------------------- |
| Dyslipidemia  | `flag_dyslip()`   | TG‚â•1.7‚ÄØmmol/L or HDL\_c <1.0‚ÄØ(‚ôÇ)/<1.3‚ÄØ(‚ôÄ).         |
| IR            | `flag_ir()`       | HOMA-IR >2.5 (literature threshold), QUICKI <0.33. |
| Hyperglycemia | `flag_hypergly()` | Fasting glucose ‚â•5.6‚ÄØmmol/L or HbA1c ‚â•5.7%.        |
| Hypertension  | `flag_hypert()`   | SBP‚â•130 or DBP‚â•80‚ÄØmmHg.                            |

### 6. Glycemic & Non-Insulin derived Indices

| Index          | Function    | Note                                                |
| :------------- | :---------- | :-------------------------------------------------- |
| SPISE          | `glycemic_markers`   | `600 √ó HDL_c^0.185/(TG^0.2 √ó BMI^1.338)`.           |
| METS-IR        | `glycemic_markers` | `(ln(2√óG0) + ln(TG)) √ó BMI)/(ln(HDL_c))`.           |
| C-peptide HOMA | `glycemic_markers` | Uses fasting C-peptide instead of insulin for HOMA. |

### 7. Novel Biofluid based markers

**Saliva** (functions `saliva_*`):

* `saliva_markers()`: AUC trapezoidal for CAR.
* `saliva_markers`: log-transform amylase.
* `saliva_markers`.

**Sweat** (functions `sweat_*`):

* `sweat_markers`: computes Na/K ratio, identifies Cl outliers.
* `sweat_markers`: calculates sweat volume per area per hour.

**Urine** (functions `urine_markers*`):

* `uacr()`, `eGFR_ckdepi()`, `fena()`, `upcr()`.

### 8. Pulmonary Function

| Metric         | Function            | Source & Details                                                                                      |
| :------------- | :------------------ | :---------------------------------------------------------------------------------------------------- |
| FEV1 %pred     | `spirometry_pred()` | Uses `rspiro::predict_spiro()` with Dinit equations for Danish adult reference (Quanjer et al. 2012). |
| FVC %pred      | same                |                                                                                                       |
| FEV1/FVC ratio | same                |                                                                                                       |

---

## ‚öôÔ∏è Usage Examples

See the [Getting Started vignette](vignettes/Getting-Started-with-HealthMarkers.html) for full code walkthroughs.

---

## üåê Online Documentation

* **Reference manual**: [https://sufyansuleman.github.io/HealthMarkers/reference/index.html](https://sufyansuleman.github.io/HealthMarkers/reference/index.html)
* **pkgdown site**: [https://sufyansuleman.github.io/HealthMarkers/](https://sufyansuleman.github.io/HealthMarkers/)

---

## üìö References

Full citation list in `NEWS.md` and the vignette. Update as needed.

---

## ü§ù Contributing

Please follow the established style and add tests/examples. Submit via GitHub PR.

---

## üìú License

MIT ¬© [Sufyan Suleman](https://github.com/sufyansuleman)
