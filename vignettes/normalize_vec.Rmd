---
title: "Normalize Vector"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Normalize Vector}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include=FALSE}
knitr::opts_chunk$set(
  comment = "#>",
  collapse = TRUE,
  message = FALSE,
  warning = FALSE
)
knitr::opts_knit$set(purl = FALSE)
```

## Scope

Normalize a numeric vector with multiple methods: passthrough, z-score, inverse normal, min-max range, and robust (median/MAD), with NA handling and constant guards.

## When to use

- You need quick, method-specific normalization for vectors before modeling.
- You want inverse-normal rank transforms or robust scaling without adding attributes.
- You need sensible behavior for missing values and constant/degenerate inputs.

## Inputs

- `x`: numeric (or coercible) vector.
- `method`: one of `none`, `z`, `inverse`, `range`, `robust`.
- `na_rm`: logical; drop missing values when computing stats (default TRUE in the function).
- `feature_range`: length-2 numeric for `range` scaling (default c(0,1)).
- `invnorm_denominator`: `n`, `n+1`, or `blom` for inverse-normal ranks.
- `ties`: rank tie-breaking for `inverse` (default `average`).
- `warn_constant`: emit warnings when inputs are constant/degenerate.

## Setup

```{r}
library(HealthMarkers)
```

## Quick start

```{r}
x <- c(1, 2, 3, 4, NA, 5)
normalize_vec(x)
```

## Ignoring missing values

```{r}
normalize_vec(x)
```

## Zero-variance guard

```{r}
normalize_vec(rep(5, 4))
```

## Other methods

```{r}
# Min-max to [-1, 1]
normalize_vec(x, method = "range", feature_range = c(-1, 1))

# Robust (median/MAD)
normalize_vec(x, method = "robust")

# Inverse-normal rank (Rankit default)
normalize_vec(x, method = "inverse")
```

## Tips

- Use `na_rm = TRUE` to avoid NA-inflated means/SDs; constant inputs yield zeros with a warning.
- Choose `range` when you need bounded outputs, `robust` for outlier-resistant scaling, `inverse` for rank-based normal scores.
- For data frames, pair with `dplyr::mutate(across())` to normalize multiple columns.
- Check for zero-variance columns before scaling; set `warn_constant = FALSE` to silence warnings in bulk pipelines.

