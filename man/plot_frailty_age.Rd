% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/frailty_index.R
\name{plot_frailty_age}
\alias{plot_frailty_age}
\title{Plot FI vs age (convenience wrapper)}
\usage{
plot_frailty_age(
  data,
  cols = NULL,
  invert = NULL,
  rescale = TRUE,
  age = NULL,
  rescale.custom = NULL,
  rescale.avoid = NULL,
  bins = 7,
  na_action = c("ignore", "warn", "error", "keep", "omit"),
  na_warn_prop = 0.2,
  check_extreme = NULL,
  extreme_action = c("warn", "ignore", "error", "cap", "NA"),
  return = c("list", "data"),
  verbose = FALSE
)
}
\arguments{
\item{data}{A data.frame or tibble of health deficits (ideally binary/logical or
scaled to \eqn{[0,1]}). Non-binary numeric columns can be rescaled by di::di when
rescale = TRUE.}

\item{cols}{Character vector of deficit column names to use. If NULL (default),
all numeric columns are used except age (if supplied).}

\item{invert}{Character vector of column names whose values should be inverted
by di::di (e.g., where higher values indicate better health).}

\item{rescale}{Logical; if TRUE, non-binary columns will be rescaled to \eqn{[0,1]}
by di::di. Default TRUE.}

\item{age}{Optional name of the column holding age (used by di for plotting and
optional age-binned outputs; excluded from auto-selected cols).}

\item{rescale.custom}{Advanced argument passed through to di::di.
See di::di documentation for syntax.}

\item{rescale.avoid}{Advanced argument passed through to di::di;
see di::di documentation for syntax.}

\item{bins}{Integer; number of age bins for FI-by-age plots. Default 7.}

\item{na_action}{One of:
\itemize{
\item Legacy: "ignore","warn","error"
\item HM-CS:  "keep","omit" (keep == ignore; omit drops rows with any NA in selected deficits)
Default "ignore".
}}

\item{na_warn_prop}{Proportion in \eqn{[0,1]} above which a high-missingness warning
is emitted (per column) when na_action = "warn". Default 0.2.}

\item{check_extreme}{NULL/TRUE/FALSE gate for out-of-range scan:
\itemize{
\item NULL (default): legacy behavior (scan only when rescale = FALSE)
\item TRUE: always scan selected deficits for values < 0 or > 1 before di::di
\item FALSE: never scan for extremes
}}

\item{extreme_action}{One of "warn","ignore","error","cap","NA" for out-of-range handling when scanning is enabled.
\itemize{
\item "cap": truncate to \eqn{[0,1]}
\item "NA": set out-of-range to NA
Default "warn".
}}

\item{return}{One of c("list","data"). "list" (default) returns the original
di::di result (backward compatible). "data" returns a tibble with one row
per individual, columns: di (the frailty index) plus the selected deficit
columns (post-capping if applied). Age is included if present.}

\item{verbose}{Logical; if TRUE, prints progress and a completion summary. Default FALSE.}
}
\value{
The object returned by frailty_index() (di::di object if return="list").
}
\description{
Calls frailty_index() with visible = TRUE; see frailty_index() for arguments,
validation, and references.
}
