% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/nutrient_markers.R
\name{nutrient_markers}
\alias{nutrient_markers}
\title{Compute a Suite of Nutrient-Based Health Markers}
\usage{
nutrient_markers(
  data,
  col_map = NULL,
  na_action = c("keep", "omit", "error"),
  na_warn_prop = 0.2,
  check_extreme = FALSE,
  extreme_action = c("warn", "cap", "error", "ignore", "NA"),
  extreme_rules = NULL,
  verbose = FALSE
)
}
\arguments{
\item{data}{A data frame or tibble containing subject-level data.}

\item{col_map}{Optional named list mapping variable keys (see Details) to
column names in \code{data}. You only need to supply the keys you have; any
markers with missing inputs return \code{NA}. If NULL, defaults to identity
mapping for all known keys.}

\item{na_action}{One of c("keep","omit","error") controlling missing-data policy
across the columns referenced by \code{col_map}.
\itemize{
\item "keep" (default): keep NA; outputs become NA where inputs are NA.
\item "omit": drop rows with NA in any used input column.
\item "error": abort if any used input contains NA.
}}

\item{na_warn_prop}{Numeric in \link{0,1}; per-variable threshold for high-missingness
diagnostics on used input columns. Default 0.2.}

\item{check_extreme}{Logical; if TRUE, scan used input columns for out-of-range
values (see \code{extreme_rules}). Default FALSE.}

\item{extreme_action}{One of c("warn","cap","error","ignore","NA") used when extremes are
detected (only when \code{check_extreme = TRUE}). Default "warn".
\itemize{
\item "warn": only warn, "cap": truncate to range and warn, "error": abort,
\item "ignore": no-op, "NA": set flagged inputs to NA.
}}

\item{extreme_rules}{Optional named list from input keys to c(min,max) ranges. If NULL,
broad defaults are used (see Details).}

\item{verbose}{Logical; if TRUE, prints stepwise messages and a final summary via hm_inform. Default FALSE.}
}
\value{
A tibble with one row per input row and these columns:
FerritinTS, AGR, Omega3Index, Mg_Cr_Ratio, GlycatedAlbuminPct,
UA_Cr_Ratio, BUN_Cr_Ratio, Ca_x_Phosphate, AnionGap, Tyr_Phe_Ratio.
}
\description{
Given a data frame or tibble of routine biochemical labs,
\code{nutrient_markers()} returns a set of widely used ratios, products,
and simple percentages that summarize iron metabolism, protein status,
omega-3 balance, renal excretion, mineral homeostasis, and aromatic
amino-acid patterns.
}
\details{
Recognized markers (returned as columns):
\itemize{
\item FerritinTS: Ferritin / Transferrin saturation
\item AGR: Albumin / Globulin, where Globulin = Total protein - Albumin
\item Omega3Index: EPA + DHA (percentage points)
\item Mg_Cr_Ratio: Magnesium / Creatinine
\item GlycatedAlbuminPct: (Glycated albumin / Albumin) x 100
\item UA_Cr_Ratio: Uric acid / Creatinine
\item BUN_Cr_Ratio: BUN / Creatinine
\item Ca_x_Phosphate: Calcium x Phosphate
\item AnionGap: (Na + K) - (Cl + HCO3)
\item Tyr_Phe_Ratio: Tyrosine / Phenylalanine
}

Recognized \code{col_map} keys and expected units (no automatic conversion):
\itemize{
\item ferritin: Serum ferritin (ng/mL)
\item transferrin_sat: Transferrin saturation (\%)
\item albumin: Serum albumin (g/L)
\item total_protein: Total serum protein (g/L)
\item EPA: Red-cell EPA as \% of total fatty acids
\item DHA: Red-cell DHA as \% of total fatty acids
\item Mg: Serum magnesium (mmol/L)
\item creatinine: Serum creatinine (umol/L)
\item glycated_albumin: Glycated albumin (g/L)
\item uric_acid: Serum uric acid (umol/L)
\item BUN: Blood urea nitrogen (mg/dL)
\item phosphate: Serum phosphate (mmol/L)
\item calcium: Serum calcium (mmol/L)
\item Na: Serum sodium (mmol/L)
\item K: Serum potassium (mmol/L)
\item Cl: Serum chloride (mmol/L)
\item HCO3: Serum bicarbonate (mmol/L)
\item Tyr: Serum tyrosine (umol/L)
\item Phe: Serum phenylalanine (umol/L)
}

Default \code{extreme_rules} (inputs) are broad and intended for unit/entry checks:
ferritin \link{0, 2000}, transferrin_sat \link{0, 100}, albumin \link{10, 60}, total_protein \link{40, 100},
EPA \link{0, 20}, DHA \link{0, 20}, Mg \link{0.2, 3}, creatinine \link{20, 2000}, glycated_albumin \link{0, 60},
uric_acid \link{50, 1000}, BUN \link{1, 150}, phosphate \link{0.1, 5}, calcium \link{0.5, 4},
Na \link{100, 200}, K \link{2, 8}, Cl \link{70, 130}, HCO3 \link{5, 45}, Tyr \link{10, 300}, Phe \link{20, 300}.
}
\examples{
df <- tibble::tibble(
  ferritin         = c(50, 100),
  transferrin_sat  = c(30, 50),
  albumin          = c(45, 40),
  total_protein    = c(70, 75),
  EPA              = c(2.0, 2.5),
  DHA              = c(4.0, 4.5),
  Mg               = c(0.85, 0.90),
  creatinine       = c(80, 90),
  glycated_albumin = c(12, 14),
  uric_acid        = c(300, 400),
  BUN              = c(14, 16),
  phosphate        = c(1.0, 1.2),
  calcium          = c(2.3, 2.4),
  Na               = c(140, 138),
  K                = c(4.2, 4.0),
  Cl               = c(100, 102),
  HCO3             = c(24, 26),
  Tyr              = c(60, 70),
  Phe              = c(50, 55)
)
nutrient_markers(df, verbose = TRUE)

}
\references{
Original derivations
Harris WS, von Schacky C. The Omega-3 Index: a new risk factor for death from coronary heart disease?
Prostaglandins Leukot Essent Fatty Acids. 2004;71(5):263–270. \doi{10.1016/j.plefa.2004.05.011} (Omega-3 Index)
Koga M, Kasayama S. Clinical impact of glycated albumin as another glycemic control marker.
J Diabetes Investig. 2010;1(1–2):43–48. \doi{10.1111/j.2040-1124.2010.00011.x} (Glycated Albumin \%)
Block GA, Hulbert-Shearon TE, Levin NW, Port FK. Association of serum phosphorus and calcium × phosphate product
with mortality risk in chronic hemodialysis patients: a national study. Kidney Int. 1998;54(2):556–562.
\doi{10.1046/j.1523-1755.1998.00005.x} (Calcium–phosphate product)
Waikar SS, Bonventre JV. Creatinine kinetics and the definition of acute kidney injury.
J Am Soc Nephrol. 2009;20(3):672–679. \doi{10.1681/ASN.2008070669} (BUN/Creatinine ratio)
}
